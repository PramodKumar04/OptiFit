<MDScreenManager>:
    LoginScreen:
        name: 'login'
    SignupScreen:
        name: 'signup'
    PersonalDetailsScreen:
        name: 'personal_details'
    HomeScreen:
        name: 'home'
    ProfileSettingsScreen:
        name: 'profile_settings'
    WorkoutPlansScreen:
        name: 'workout_plans'
    MotivationScreen:
        name: 'motivation'

<LoginScreen>:
    name: 'login'
    MDBoxLayout:
        orientation: 'vertical'
        padding: 50
        spacing: 10
        MDLabel:
            text: 'Login'
            halign: 'center'
            font_style: 'H4'
        MDTextField:
            id: email
            hint_text: 'Email'
            required: True
        MDTextField:
            id: password
            hint_text: 'Password'
            password: True
            required: True
        MDRaisedButton:
            text: 'Login'
            pos_hint: {"center_x": .5}
            on_release: root.login()
        MDFlatButton:
            text: 'Signup'
            pos_hint: {"center_x": .5}
            on_release: app.root.current = 'signup'
        MDIconButton:
            icon: 'google'
            pos_hint: {"center_x": .5}
            on_release: root.google_login()

        MDIconButton:
            icon: 'arrow-left'
            pos_hint: {"top": 1, "right": 1}
            on_release: app.root.current = 'home'

<SignupScreen>:
    name: 'signup'
    MDBoxLayout:
        orientation: 'vertical'
        padding: 50
        spacing: 10
        MDLabel:
            text: 'Signup'
            halign: 'center'
            font_style: 'H4'
        MDTextField:
            id: signup_email
            hint_text: 'Email'
            required: True
        MDTextField:
            id: signup_password
            hint_text: 'Password'
            password: True
            required: True
        MDTextField:
            id: confirm_password
            hint_text: 'Confirm Password'
            password: True
            required: True
        MDRaisedButton:
            text: 'Signup'
            pos_hint: {"center_x": .5}
            on_release: root.signup_step_one()

        MDIconButton:
            icon: 'arrow-left'
            pos_hint: {"top": 1, "left": 1}
            on_release: app.root.current = 'home'

<PersonalDetailsScreen>:
    name: 'personal_details'
    MDBoxLayout:
        orientation: 'vertical'
        padding: 50
        spacing: 10
        MDLabel:
            text: 'Personal Details'
            halign: 'center'
            font_style: 'H4'
        MDTextField:
            id: name
            hint_text: 'Name'
            required: True
        MDTextField:
            id: age
            hint_text: 'Age'
            required: True
            input_filter: 'int'
        MDTextField:
            id: height
            hint_text: 'Height (cm)'
            required: True
            input_filter: 'int'
        MDTextField:
            id: weight
            hint_text: 'Weight (kg)'
            required: True
            input_filter: 'int'
        MDTextField:
            id: gender_field
            hint_text: 'Gender'
            on_focus: if self.focus: root.open_gender_menu()
            readonly: True
        MDTextField:
            id: fitness_goal_field
            hint_text: 'Fitness Goal'
            on_focus: if self.focus: root.open_fitness_goal_menu()
            readonly: True
        MDRaisedButton:
            text: 'Submit Details'
            pos_hint: {"center_x": .5}
            on_release: root.submit_details()

        MDIconButton:
            icon: 'arrow-left'
            pos_hint: {"top": 1, "right": 1}
            on_release: app.root.current = 'home'

<HomeScreen>:
    name: 'home'
    MDBoxLayout:
        orientation: 'vertical'
        padding: 50
        spacing: 10
        MDLabel:
            id: welcome_label
            text: 'Welcome, User!'
            halign: 'center'
            font_style: 'H4'
        MDRaisedButton:
            text: 'Profile Settings'
            pos_hint: {"center_x": .5}
            on_release: app.root.current = 'profile_settings'
        MDRaisedButton:
            text: 'Workout Plans'
            pos_hint: {"center_x": .5}
            on_release: app.root.current = 'workout_plans'
        MDRaisedButton:
            text: 'Motivation'
            pos_hint: {"center_x": .5}
            on_release: app.root.current = 'motivation'
        MDRaisedButton:
            text: 'Logout'
            pos_hint: {"center_x": .5}
            on_release: root.logout()

        MDIconButton:
            icon: 'arrow-left'
            pos_hint: {"top": 1, "right": 1}
            on_release: app.root.current = 'home'

<ProfileSettingsScreen>:
    name: 'profile_settings'
    MDBoxLayout:
        orientation: 'vertical'
        padding: 50
        spacing: 10
        MDLabel:
            text: 'Profile Settings'
            halign: 'center'
            font_style: 'H4'
        MDTextField:
            id: name
            hint_text: 'Name'
            required: True
        MDTextField:
            id: email
            hint_text: 'Email'
            readonly: True
        MDTextField:
            id: gender_field
            hint_text: 'Gender'
            readonly: True
        MDTextField:
            id: fitness_goal_field
            hint_text: 'Fitness Goal'
            readonly: True
        MDRaisedButton:
            text: 'Update Profile'
            pos_hint: {"center_x": .5}
            on_release: root.submit_settings()

        MDIconButton:
            icon: 'arrow-left'
            pos_hint: {"top": 1, "left": 1}
            on_release: app.root.current = 'home'

<WorkoutPlansScreen>:
    BoxLayout:
        orientation: 'vertical'

        MDLabel:
            id: workout_day_title
            text: "Workout Plan"
            halign: "center"
            font_style: "H5"
            size_hint_y: None
            height: "50dp"

        ScrollView:
            MDBoxLayout:
                id: workout_list
                orientation: 'vertical'
                spacing: "10dp"
                padding: "10dp"
                adaptive_height: True
                size_hint_y: None  # Ensure the content can expand and fit
                height: self.minimum_height  # Allow dynamic resizing

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: "50dp"

            MDRaisedButton:
                text: "Previous Day"
                on_release: root.previous_day()

            MDRaisedButton:
                text: "Next Day"
                on_release: root.next_day()

        MDIconButton:
            icon: 'arrow-left'
            pos_hint: {"top": 1, "left": 1}
            on_release: app.root.current = 'home'

<MotivationScreen>:
    name: 'motivation'
    MDBoxLayout:
        orientation: 'vertical'
        padding: 50
        spacing: 10
        MDLabel:
            text: 'Daily Motivation'
            halign: 'center'
            font_style: 'H4'
        MDLabel:
            id: quote_label
            text: 'Loading quote...'
            halign: 'center'
        MDRaisedButton:
            text: 'Get Daily Quote'
            pos_hint: {"center_x": .5}
            on_release: root.get_daily_quote()

        MDIconButton:
            icon: 'arrow-left'
            pos_hint: {"top": 1, "left": 1}
            on_release: app.root.current = 'home'
